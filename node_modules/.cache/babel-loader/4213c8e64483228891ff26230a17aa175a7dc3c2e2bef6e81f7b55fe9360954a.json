{"ast":null,"code":"import n, { useRef as e, useEffect as t, cloneElement as r } from \"react\";\nfunction o(n, e, t) {\n  return (e = function (n) {\n    var e = function (n, e) {\n      if (\"object\" != typeof n || !n) return n;\n      var t = n[Symbol.toPrimitive];\n      if (void 0 !== t) {\n        var r = t.call(n, e || \"default\");\n        if (\"object\" != typeof r) return r;\n        throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n      }\n      return (\"string\" === e ? String : Number)(n);\n    }(n, \"string\");\n    return \"symbol\" == typeof e ? e : e + \"\";\n  }(e)) in n ? Object.defineProperty(n, e, {\n    value: t,\n    enumerable: !0,\n    configurable: !0,\n    writable: !0\n  }) : n[e] = t, n;\n}\nvar u = {\n    click: \"onClick\",\n    focusin: \"onFocus\",\n    focusout: \"onFocus\",\n    mousedown: \"onMouseDown\",\n    mouseup: \"onMouseUp\",\n    touchstart: \"onTouchStart\",\n    touchend: \"onTouchEnd\"\n  },\n  i = function (i) {\n    var c = i.children,\n      a = i.onClickAway,\n      v = i.focusEvent,\n      f = void 0 === v ? \"focusin\" : v,\n      l = i.mouseEvent,\n      s = void 0 === l ? \"click\" : l,\n      d = i.touchEvent,\n      m = void 0 === d ? \"touchend\" : d,\n      p = e(null),\n      y = e(null),\n      E = e(!1);\n    t(function () {\n      return setTimeout(function () {\n        E.current = !0;\n      }, 0), function () {\n        E.current = !1;\n      };\n    }, []);\n    var b = function (n) {\n      return function (e) {\n        y.current = e.target;\n        var t = null == c ? void 0 : c.props[n];\n        t && t(e);\n      };\n    };\n    t(function () {\n      var n,\n        e,\n        t = null !== (n = null === (e = p.current) || void 0 === e ? void 0 : e.ownerDocument) && void 0 !== n ? n : document,\n        r = function (n) {\n          E.current && (p.current && p.current.contains(n.target) || y.current === n.target || !t.contains(n.target) || a(n));\n        };\n      return t.addEventListener(s, r), t.addEventListener(m, r), t.addEventListener(f, r), function () {\n        t.removeEventListener(s, r), t.removeEventListener(m, r), t.removeEventListener(f, r);\n      };\n    }, [f, s, a, m]);\n    var h = u[s],\n      g = u[m],\n      w = u[f];\n    return n.Children.only(r(c, o(o(o({\n      ref: function (n) {\n        p.current = n;\n        var e = c.ref;\n        \"function\" == typeof e ? e(n) : e && (e.current = n);\n      }\n    }, w, b(w)), h, b(h)), g, b(g))));\n  };\ni.displayName = \"ClickAwayListener\";\nexport { i as default };","map":{"version":3,"names":["u","click","focusin","focusout","mousedown","mouseup","touchstart","touchend","i","ClickAwayListener","c","children","a","onClickAway","v","focusEvent","f","l","mouseEvent","s","d","touchEvent","m","p","e","y","E","t","setTimeout","current","b","handleBubbledEvents","n","target","props","ownerDocument","document","r","handleEvents","contains","addEventListener","removeEventListener","h","g","w","Children","only","o","ref","displayName","default"],"sources":["/Users/kane/Sonnenhus/sonnenhus/node_modules/react-click-away-listener/src/index.tsx"],"sourcesContent":["import React, {\n\tuseRef,\n\tuseEffect,\n\tRefCallback,\n\tcloneElement,\n\tReactElement,\n\tHTMLAttributes,\n\tMutableRefObject,\n\tFunctionComponent\n} from 'react';\n\ntype FocusEvents = 'focusin' | 'focusout';\ntype MouseEvents = 'click' | 'mousedown' | 'mouseup';\ntype TouchEvents = 'touchstart' | 'touchend';\ntype Events = FocusEvent | MouseEvent | TouchEvent;\n\ninterface Props extends HTMLAttributes<HTMLElement> {\n\tonClickAway: (event: Events) => void;\n\tfocusEvent?: FocusEvents;\n\tmouseEvent?: MouseEvents;\n\ttouchEvent?: TouchEvents;\n\tchildren: ReactElement<any>;\n}\n\nconst eventTypeMapping = {\n\tclick: 'onClick',\n\tfocusin: 'onFocus',\n\tfocusout: 'onFocus',\n\tmousedown: 'onMouseDown',\n\tmouseup: 'onMouseUp',\n\ttouchstart: 'onTouchStart',\n\ttouchend: 'onTouchEnd'\n};\n\nconst ClickAwayListener: FunctionComponent<Props> = ({\n\tchildren,\n\tonClickAway,\n\tfocusEvent = 'focusin',\n\tmouseEvent = 'click',\n\ttouchEvent = 'touchend'\n}) => {\n\tconst node = useRef<HTMLElement | null>(null);\n\tconst bubbledEventTarget = useRef<EventTarget | null>(null);\n\tconst mountedRef = useRef(false);\n\n\t/**\n\t * Prevents the bubbled event from getting triggered immediately\n\t * https://github.com/facebook/react/issues/20074\n\t */\n\tuseEffect(() => {\n\t\tsetTimeout(() => {\n\t\t\tmountedRef.current = true;\n\t\t}, 0);\n\n\t\treturn () => {\n\t\t\tmountedRef.current = false;\n\t\t};\n\t}, []);\n\n\tconst handleBubbledEvents =\n\t\t(type: string) =>\n\t\t(event: Events): void => {\n\t\t\tbubbledEventTarget.current = event.target;\n\n\t\t\tconst handler = children?.props[type];\n\n\t\t\tif (handler) {\n\t\t\t\thandler(event);\n\t\t\t}\n\t\t};\n\n\tconst handleChildRef = (childRef: HTMLElement) => {\n\t\tnode.current = childRef;\n\n\t\tlet { ref } = children as typeof children & {\n\t\t\tref: RefCallback<HTMLElement> | MutableRefObject<HTMLElement>;\n\t\t};\n\n\t\tif (typeof ref === 'function') {\n\t\t\tref(childRef);\n\t\t} else if (ref) {\n\t\t\tref.current = childRef;\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tconst nodeDocument = node.current?.ownerDocument ?? document;\n\n\t\tconst handleEvents = (event: Events): void => {\n\t\t\tif (!mountedRef.current) return;\n\n\t\t\tif (\n\t\t\t\t(node.current && node.current.contains(event.target as Node)) ||\n\t\t\t\tbubbledEventTarget.current === event.target ||\n\t\t\t\t!nodeDocument.contains(event.target as Node)\n\t\t\t) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tonClickAway(event);\n\t\t};\n\n\t\tnodeDocument.addEventListener(mouseEvent, handleEvents);\n\t\tnodeDocument.addEventListener(touchEvent, handleEvents);\n\t\tnodeDocument.addEventListener(focusEvent, handleEvents);\n\n\t\treturn () => {\n\t\t\tnodeDocument.removeEventListener(mouseEvent, handleEvents);\n\t\t\tnodeDocument.removeEventListener(touchEvent, handleEvents);\n\t\t\tnodeDocument.removeEventListener(focusEvent, handleEvents);\n\t\t};\n\t}, [focusEvent, mouseEvent, onClickAway, touchEvent]);\n\n\tconst mappedMouseEvent = eventTypeMapping[mouseEvent];\n\tconst mappedTouchEvent = eventTypeMapping[touchEvent];\n\tconst mappedFocusEvent = eventTypeMapping[focusEvent];\n\n\treturn React.Children.only(\n\t\tcloneElement(children as ReactElement<any>, {\n\t\t\tref: handleChildRef,\n\t\t\t[mappedFocusEvent]: handleBubbledEvents(mappedFocusEvent),\n\t\t\t[mappedMouseEvent]: handleBubbledEvents(mappedMouseEvent),\n\t\t\t[mappedTouchEvent]: handleBubbledEvents(mappedTouchEvent)\n\t\t})\n\t);\n};\n\nClickAwayListener.displayName = 'ClickAwayListener';\n\nexport default ClickAwayListener;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}